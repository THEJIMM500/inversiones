create database inversiones;

use inversiones;

create table clientes(
	usuario varchar(30) primary key,
	contrase√±a varchar(30) not null,
	nombre varchar(20),
	apellidos varchar(30),
	ntarjeta varchar(30),
	direccion varchar(30),
	correo varchar(30),
	telefono varchar(30),
	fechanac date,
	saldo double
);

create table empresas(
	nombre varchar(30) primary key,
	valor_accion double default 0
);

create table accionesCompradas(
	nombre_empresa varchar(30) primary key,
	usuario varchar(30) primary key,
	numero_acciones integer not null,
	foreign key(usuario) references clientes(usuario)
		on delete cascade
		on update cascade,
	foreign key(nombre_empresa) references empresas(nombre)
		on delete cascade
		on update cascade
);

create table historial(
	usuario varchar(30) primary key,
	nombre_empresa varchar(30) primary key,
	valor_compra double not null,
	tipo_transaccion enum('compra','venta') not null,
	fecha_transaccion date,
	foreign key(usuario) references clientes(usuario)
		on delete cascade
		on update cascade,
	foreign key(nombre_empresa) references empresas(nombre)
		on delete cascade
		on update cascade
);
